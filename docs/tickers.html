<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Multi Quote Banner</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{margin:0;padding:12px;font-family:-apple-system,BlinkMacSystemFont,sans-serif;background:#fff}
h1{margin:0 0 12px;font-size:16px;font-weight:600}
.controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
.controls input,.controls select,.controls button{font-size:12px;padding:4px 8px;border:1px solid #d0d4d9;border-radius:4px;background:#fff;cursor:pointer}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:10px}
.quote-item{border:1px solid #e1e5e9;border-radius:8px;padding:4px;background:#f8f9fa;position:relative}
.remove-btn{position:absolute;top:4px;right:4px;background:#fff;border:1px solid #d0d4d9;border-radius:4px;font-size:10px;cursor:pointer;padding:2px 5px}
.footer{margin-top:14px;font-size:11px;color:#888;text-align:center}
</style>
</head>
<body>
<h1>TradingView Single Quote Banner</h1>
<div class="controls">
  <select id="colorTheme">
    <option value="light">Light</option>
    <option value="dark">Dark</option>
  </select>
  <input id="addSymbol" placeholder="EXCHANGE:SYMBOL">
  <button id="addBtn">Add</button>
  <button id="clearBtn">Clear</button>
</div>
<div id="grid" class="grid"></div>
<div class="footer">Query params: ?theme=dark&list=NASDAQ:AAPL,NYSE:IBM,COINBASE:BTCUSD</div>
<script>
const defaultList = ["NYSE:RTX","NYSE:NOC","NASDAQ:RKLB","NYSE:HIMS","COINBASE:BTCUSD","FX_IDC:EURUSD"];
let symbols = [];

function parseQuery(){
  const p = new URLSearchParams(location.search);
  if(p.get('theme')) document.getElementById('colorTheme').value = p.get('theme');
  symbols = p.get('list')
    ? p.get('list').split(',').map(s=>s.trim()).filter(Boolean)
    : defaultList.slice();
}

function createQuote(symbol, theme){
  const wrapper = document.createElement('div');
  wrapper.className = 'quote-item';
  const removeBtn = document.createElement('button');
  removeBtn.className = 'remove-btn';
  removeBtn.textContent = 'Ã—';
  removeBtn.title = 'Remove';
  removeBtn.onclick = () => {
    symbols = symbols.filter(s => s !== symbol);
    render();
  };
  wrapper.appendChild(removeBtn);

  const tvContainer = document.createElement('div');
  tvContainer.className = 'tradingview-widget-container';

  const tvWidgetDiv = document.createElement('div');
  tvWidgetDiv.className = 'tradingview-widget-container__widget';
  tvContainer.appendChild(tvWidgetDiv);

  const script = document.createElement('script');
  script.type = 'text/javascript';
  script.async = true;
  script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js';
  script.innerHTML = JSON.stringify({
    symbol,
    colorTheme: theme,
    isTransparent: false,
    locale: "en",
    width: 160
  });

  tvContainer.appendChild(script);
  wrapper.appendChild(tvContainer);
  return wrapper;
}

function render(){
  const theme = document.getElementById('colorTheme').value;
  const grid = document.getElementById('grid');
  grid.innerHTML = '';
  symbols.forEach(s => grid.appendChild(createQuote(s, theme)));
}

document.getElementById('colorTheme').addEventListener('change', render);
document.getElementById('addBtn').addEventListener('click', () => {
  const val = document.getElementById('addSymbol').value.trim();
  if(!val.includes(':')) return;
  symbols.push(val);
  document.getElementById('addSymbol').value='';
  render();
});
document.getElementById('clearBtn').addEventListener('click', () => {
  symbols = [];
  render();
});

parseQuery();
render();
</script>
</body>
</html>